{{- $pag := .Paginator -}}
{{- if $pag -}}
  {{- if gt $pag.TotalPages 1 -}}
    <div id="pagination">
      <nav class="mt-8 flex justify-center items-center gap-3" aria-label="Pagination">
        <!-- Previous button -->
        <a
          aria-label="{{ i18n "previous" }}"
          {{- if $pag.HasPrev }}
            href="{{ $pag.Prev.URL }}"
          {{- else }}
            href="#"
            disabled
          {{ end -}}
          class="inline-flex items-center justify-center w-10 h-10 rounded-lg 
            transition-all duration-300 ease-out
          {{- if $pag.HasPrev }}
            bg-blue-50/90 dark:bg-blue-900/30
            text-blue-600 dark:text-blue-300
            hover:bg-cyan-50/90 dark:hover:bg-cyan-900/30
            hover:text-cyan-600 dark:hover:text-cyan-300
            hover:-translate-y-0.5
            backdrop-blur-sm
            ring-1 ring-blue-100 dark:ring-blue-900/50
            shadow-sm shadow-blue-100/50 dark:shadow-blue-900/30
          {{- else }}
            bg-neutral-100/80 dark:bg-neutral-800/80
            text-neutral-400 dark:text-neutral-600
            cursor-not-allowed
            backdrop-blur-sm
          {{ end -}}">
          {{- partial "utils/icon.html" (dict "icon" "arrow-left" "class" "w-5 h-5") -}}
        </a>

        <!-- Page numbers -->
        <div class="flex items-center gap-1">
          {{- $ellipsed := false -}}
          {{- $shouldEllipse := false -}}
          {{- range $pag.Pagers -}}
            {{- $right := sub .TotalPages .PageNumber -}}
            {{- $showNumber := or (le .PageNumber 3) (eq $right 0) -}}
            {{- $showNumber := or $showNumber (and (gt .PageNumber (sub $pag.PageNumber 2)) (lt .PageNumber (add $pag.PageNumber 2))) -}}
            {{- $isCurrent := eq . $pag -}}

            {{- if $showNumber -}}
              {{- $ellipsed = false -}}
              {{- $shouldEllipse = false -}}
            {{- else -}}
              {{- $shouldEllipse = not $ellipsed -}}
              {{- $ellipsed = true -}}
            {{- end -}}

            {{- if $showNumber -}}
              <a
                href="{{- .URL -}}"
                {{- if $isCurrent }}
                  aria-current="page"
                {{- end -}}
                class="inline-flex items-center justify-center min-w-[2.5rem] h-10 px-3 rounded-lg 
                  transition-all duration-300 ease-out
                {{- if $isCurrent }}
                  bg-blue-600 dark:bg-blue-700
                  text-white
                  font-medium
                  shadow-xs shadow-blue-200/50 dark:shadow-blue-900/30
                {{- else }}
                   bg-white/80 dark:bg-neutral-900/80
                    text-blue-700 dark:text-blue-300
                  hover:bg-cyan-50/90 dark:hover:bg-cyan-900/30
                  hover:text-cyan-600 dark:hover:text-cyan-300
                  hover:-translate-y-0.5
                  backdrop-blur-sm
                  ring-1 ring-blue-100 dark:ring-blue-900/50
                  shadow-xs shadow-blue-100/50 dark:shadow-blue-900/30
                {{ end -}}">
                {{- .PageNumber -}}
              </a>
            {{- else if $shouldEllipse -}}
              <span class="inline-flex items-center justify-center px-3 text-neutral-600 dark:text-neutral-400">
                &hellip;
              </span>
            {{- end -}}
          {{- end -}}
        </div>

        <!-- Next button -->
        <a
          aria-label="{{ i18n "next" }}"
          {{- if $pag.HasNext }}
            href="{{ $pag.Next.URL }}"
          {{- else }}
            disabled
          {{ end -}}
          class="inline-flex items-center justify-center w-10 h-10 rounded-lg 
            transition-all duration-200 ease-out
          {{- if $pag.HasNext }}
            bg-white/80 dark:bg-neutral-900/80
            text-blue-700 dark:text-blue-300
            hover:bg-blue-50 dark:hover:bg-blue-900/40
            hover:-translate-y-0.5
            backdrop-blur-sm
            ring-1 ring-blue-100 dark:ring-blue-900/50
          {{- else }}
            bg-neutral-100/80 dark:bg-neutral-800/80
            text-neutral-400 dark:text-neutral-600
            cursor-not-allowed
            backdrop-blur-sm
          {{ end -}}">
          {{- partial "utils/icon.html" (dict "icon" "arrow-right" "class" "w-5 h-5") -}}
        </a>
      </nav>
    </div>
  {{- end -}}
{{- end -}}
